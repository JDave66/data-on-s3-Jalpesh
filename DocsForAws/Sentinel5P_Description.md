## Introduction

The [Sentinel-5 Precursor (Sentinel-5P)](https://earth.esa.int/web/guest/missions/esa-eo-missions/sentinel-5p) satellite is an active European Space Agency Earth observation platform that is funded under the [European Commission's Copernicus Earth Observation Programme](https://www.copernicus.eu/en). Sentinel 5P is a polar orbiting satellite that completes 14 orbits of the Earth a day.

Sentinel-5P, carries the [TROPOspheric Monitoring Instrument](http://www.tropomi.eu/) (TROPOMI) which is a spectrometer that senses ultraviolet (UV), visible (VIS), near (NIR) and short-wave infrared (SWIR). Output from these sensors are used to generate products to monitor ozone, methane, formaldehyde, aerosol, carbon monoxide, nitrogen dioxide and sulphur dioxide in the atmosphere. These products are known as level 2 products.

TROPOMI takes measurements covering an area of 2600km by 7km.  The satellite was launched in October 2017 and entered into routine operational phase in March 2019. Data is available from July 2018 onwards. The Sentinel-5P is an active and developing mission, from time to time the ESA reprocesses data in order to take into account new algorithm developments.
 
## Official ESA Documents

 Technical documents for the Level 2 products consist of the following types:

* **PUM (Product User Information):** The technical characteristics of the Level 2 products.
* **ATBD (Algorithm Theoretical Basis Document):** detailed information on the retrieval algorithms.
* **IODD (Input Output Data definition):** description of the input and output data of the S5P/TROPOMI Level 2 processing.

[These documents and more can be found at the S5-P Document Library](https://sentinel.esa.int/web/sentinel/user-guides/sentinel-5p-tropomi/document-library)

### Types of Data Contained in the **MEEO-S5P** Bucket

This data set consists of the Level 2 products generated from observations from the Sentinel-5P satellite. The Sentinel data is divided by type, described below:

* **Near Real Time (NRTI):** Products are available within 3 hours after sensing, shortly after that they will appear in the S3 bucket. These files are in the netCDF file format. Over time NRTI data gets replaced by OFFL data.
* **Off Line (OFFL):** For level 2 products this data is available about a week after the NRTI data, shortly afterwards they will appear in the S3 bucket. These files are in the netCDF file format and are of higher quality to the NRTI data.
* **Cloud Optimised Geo-TIFF (COGT):** These files are generated by MEEO from OFFL data shortly after the official Sentinel-5P data becomes available. These files are in the TIFF image file format. 
* **Reprocessed File (RPRO):** From time to time there are new advances in product generation and ESA issues reprocessed files. These are converted into cloud optimised geo-tiff by MEEO.

The bucket, **s3://meeo-s5p**, will keep in step with ESA changes and updates to their published S5P Level 2 data set, if you would like to kept up to date on how such changes effect the bucket contents please email  here to be added to our mailing list **(sentinel5p@meeo.it)**. 

This bucket contains the following S5P Level 2 products:

|  Parameter | Product Type (10 Characters wide)  | Parameter used to generate COGT  |
| ---------------|:-------------:|:-------------:| 
| Ozone (O3) total column |  L2__O3____ | ozone_total_vertical_column |
| Nitrogen Dioxide (NO2) | L2__NO2___ | nitrogendioxide_tropospheric_column |
| Sulphur Dioxide (SO2) total column | L2__SO2___ | sulfur_total_vertical_column_1k |
| Carbon Monoxide (CO) total column | L2__CO____ | carbonmonoxide_total_column |
| Methane (CH4) total column | L2__CH4___ | methane_mixing_ratio |
| Formaldehyde (HCHO) total column | L2__HCHO__ | formaldehyde_tropospheric_vertical_column |
| UV Aerosol Index | L2__AER_AI | aerosol_index_354_388 |


## File Names and Path Structure of Bucket 

### File Names
NRT and OFFL files retain their original filenames.  The file names vary based on the parameter, but the general naming schema is a as follows:

MMM_XXXX_PPPPPPPPPP_YYYYMMDDTHHMMSS_YYYYMMDDTHHMMSS_ORBIT_NN_Mmmmpp_YYYYMMDDTHHMMSS.nc

Where:

* **MMM (3 characters):** mission name (S5P).
* **XXXX (4 characters):** processing stream (NRTI, OFFL, RPRO).
* **PPPPPPPPPP (10 characters):** Product identifier. **(check this)**
* **YYYYMMDDTHHMMSS (15 characters):** Start of acquisition time (note T is a fixed character).
* **YYYYMMDDTHHMMSS (15 characters):** End of acquisition time (note T is a fixed character).
* **Orbit (5 characters):** Orbit Number.
* **NN (2 characters):** Collection number.
* **MMmmpp (5 characters):** Processor number, with “MM” teh major version number, “mm” the minor version number and “pp” as the patch level.
* **YYYYMMDDTHHMMSS (15 characters):** the data processing time (note T is a fixed character).
* **NC (2 characters):** the file name extension. File formats are netCDF-4 there the extension will be “nc”
      
For example:

*S5P_OFFL_L2__NO2____20191001T012402_20191001T030531_10182_01_010302_20191007T032229.nc*

### Bucket structure and constructing a path to a file

The bucket name is: 

* **s3://meeo-s5p**

A directory structure has been added to help with data discovery. This directory structure is based on the filename and is as follows:

* **MMM:** mission name (S5P)
* **XXXX:** processing stream (NRTI, OFFL, COGT)
* **PPPPPPPPPP:** Product identifier
* **YYYY:** Acquisition. year
* **MM:** Acquisition. month
* **DD:** Acquisition. Day

For example, to construct the path to the file below:

*S5P_OFFL_L2__NO2____20191001T012402_20191001T030531_10182_01_010302_20191007T032229.nc*

1. Start with the S3 bucket section: 
**meeo-s5p/OFFL/** 

2. Then get the path to the *directory*:
 **/L2__NO2___/2019/10/01/**

3. This gives the path:
**meeo-s5p/OFFL/L2__NO2___/2019/10/01/**

4. Now append the file name to directory path to get the path to the file:
**meeo-s5p/OFFL/L2__NO2___/2019/10/01/**

Finally we have a path to the desired file:

*s3://meeo-s5p/OFFL/L2__NO2___/2019/10/01/S5P_OFFL_L2__NO2____20191001T012402_20191001T030531_10182_01_010302_20191007T032229.nc*

### Cloud Optimised Geo-TIFF
Geo-Tiffs are image files that have been generated from the original netCDF files. 

The paths to the geo-tiff files and the file names are constructed as follows:

**NB: The paths for COGT are slightly different from previous paths.**

1. Start with the S3 bucket section, use COGT and then NRTI or OFFL: 
**meeo-s5p/COGT/OFFL/** 

2. Then get the path to the *directory*, this will be the same construction as the original file that the TIFF is generated from. Note:
 **/L2__NO2___/2019/10/01/**

3. This gives the path:
**meeo-s5p/COGT/OFFL/L2__NO2___/2019/10/01/**

4. Now append the file name to directory path to get the path to the file:
**meeo-s5p/COGT/OFFL/L2__NO2___/2019/10/01/**

5. Prepare the file name, append the appropriate parameter to original filename and replace *.nc* file ending with *.tif*

		S5P_OFFL_L2__NO2____20191001T012402_20191001T030531_10182_01_010302_20191007T032229.nc
		
		becomes
		
		S5P_OFFL_L2__NO2____20191001T012402_20191001T030531_10182_01_010302_20191007T032229_nitrogendioxide_tropospheric_column.tif

 
## Data Catalogue
MEEO have implemented a [SpatioTemporal Asset Catalog](https://stacspec.org/) for this data archive. This is a  technology that is aimed at providing a standard way to catologue Earth observation data on the Cloud.

### SpatioTemporal Asset Catalog (STAC)
A SpatioTemporal Asset Catalog is generated daily and is stored here:
[https://meeo-s5p.s3.amazonaws.com/index.html#/?t=catalogs](https://meeo-s5p.s3.amazonaws.com/index.html#/?t=catalogs)
